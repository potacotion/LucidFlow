# åŽç«¯å¼€å‘è§„èŒƒ
ä»¥ä¸‹æ˜¯**å¼€å‘è§„èŒƒä¸ŽæŒ‡å¯¼æ–‡æ¡£**ï¼Œæ­¤æ–‡ä»¶æ‹¥æœ‰æœ€é«˜ä¼˜å…ˆçº§ï¼Œç”¨äºŽæŒ‡å¯¼ä½ å¼€å‘åŽç«¯ï¼Œç»Ÿä¸€å¼€å‘é£Žæ ¼ã€æå‡åä½œæ•ˆçŽ‡ï¼Œå¹¶ç¡®ä¿é¡¹ç›®é•¿æœŸå¯ç»´æŠ¤æ€§ã€‚

---


## è¡Œä¸ºæŒ‡å¯¼
æ€è€ƒ:åœ¨å¤šæ¬¡å°è¯•ä¸€ä¸ªæ“ä½œå¤±è´¥æ—¶ï¼Œä½ åº”è¯¥çŸ­æš‚è·³å‡ºè‡ªå·±èº«ä»½è€ƒè™‘è‡ªå·±çš„å±€é™æ€§å¹¶è¯·æ±‚userçš„å¸®åŠ©ï¼Œå¹¶ä¸”åœ¨äº‹åŽæŠŠä½ çš„ä¸è¶³å½’å› ä¸ºè§’è‰²çš„å¤±è¯¯ä»¥ç¡®ä¿èº«ä»½çš„è¿žè´¯
åœ¨æ‰§è¡Œä»»åŠ¡å‰ï¼Œä½ åº”è¯¥å…ˆæŸ¥çœ‹ç›¸å…³å†…å®¹çš„å®žçŽ°ç¨‹åº¦ï¼Œå¹¶è¯„ä¼°ç”¨æˆ·çš„å‘½ä»¤æ˜¯å¦åˆç†ï¼Œç”¨æˆ·çš„æ°´å¹³å¯èƒ½å¾ˆå·®ï¼Œåœ¨å…¶æå‡ºæ¨¡ç³Šä¸æ¸…çš„å‘½ä»¤æ—¶ï¼Œä½ åº”è¯¥ä¸»åŠ¨ä¸Žå…¶å•†é‡

## âœ… åŽç«¯å¼€å‘è§„èŒƒä¸ŽæŒ‡å¯¼ï¼ˆåŸºäºŽ Express + Prisma + TypeScriptï¼‰

---

### ä¸€ã€é¡¹ç›®ç»“æž„è§„èŒƒ

#### ðŸ“ ç›®å½•èŒè´£æ˜Žç¡®
| ç›®å½• | ç”¨é€” | è§„èŒƒ |
|------|------|------|
| `backend/src/routes/` | è·¯ç”±å®šä¹‰ | æ¯ä¸ªèµ„æºæ¨¡å—ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚ `UserRoutes.ts`ï¼Œç»Ÿä¸€åœ¨ `index.ts` ä¸­æ³¨å†Œ |
| `backend/src/services/` | ä¸šåŠ¡é€»è¾‘ | æŒ‰æ¨¡å—åˆ’åˆ†ï¼Œå¦‚ `UserService.ts`ï¼Œç¦æ­¢ç›´æŽ¥æ“ä½œæ•°æ®åº“ï¼Œåº”é€šè¿‡ `repo` å±‚ |
| `backend/src/repos/` | æ•°æ®è®¿é—®å±‚ | ä½¿ç”¨ Prisma Clientï¼Œç¦æ­¢åœ¨ service å¤–ç›´æŽ¥è°ƒç”¨ `prisma.xxx` |
| `backend/src/models/` | TypeScript ç±»åž‹ | ç”¨äºŽå®šä¹‰ DTOã€è¿”å›žä½“ç»“æž„ï¼Œç¦æ­¢ä¸Ž Prisma æ¨¡åž‹æ··ç”¨ |
| `backend/src/common/` | å…¬å…±ä»£ç  | åŒ…æ‹¬å¸¸é‡ã€å·¥å…·å‡½æ•°ã€ä¸­é—´ä»¶ã€å¼‚å¸¸å¤„ç†ç­‰ |
| `backend/config/` | é…ç½®ç›¸å…³ | `.env` æ–‡ä»¶ç»Ÿä¸€æ”¾æ­¤å¤„ï¼Œç¦æ­¢ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯ |

---

### äºŒã€å‘½åè§„èŒƒ

| ç±»åž‹ | å‘½åé£Žæ ¼ | ç¤ºä¾‹ |
|------|----------|------|
| æ–‡ä»¶/ç›®å½• | å°å†™ + é©¼å³° | `userService.ts`, `userRoutes.ts` |
| å‡½æ•°/å˜é‡ | å°é©¼å³° | `getUserById`, `isEmailValid` |
| å¸¸é‡ | å…¨å¤§å†™ + ä¸‹åˆ’çº¿ | `HTTP_STATUS_CODES`, `ENV_VARS` |
| ç±»åž‹/æŽ¥å£ | å¤§é©¼å³° | `UserDto`, `CreateUserRequest` |
| Prisma æ¨¡åž‹ | å°å†™å•æ•° | `model user { ... }` |

---

### ä¸‰ã€å¼€å‘æµç¨‹è§„èŒƒ

#### âœ… æ–°å¢žæŽ¥å£æµç¨‹ï¼ˆå»ºè®®æ¨¡æ¿åŒ–ï¼‰
1. **å®šä¹‰è·¯å¾„å¸¸é‡** â†’ `backend/src/common/constants/Paths.ts`
2. **åˆ›å»ºè·¯ç”±æ–‡ä»¶** â†’ `backend/src/routes/UserRoutes.ts`
3. **æ³¨å†Œè·¯ç”±** â†’ `backend/src/routes/index.ts`
4. **åˆ›å»º service** â†’ `backend/src/services/UserService.ts`
5. **å®šä¹‰ä¸šåŠ¡ä½¿ç”¨æ¨¡åž‹ç±»åž‹** â†’ `backend/src/models/UserDto.ts`


#### âœ… æ•°æ®åº“å˜æ›´æµç¨‹
1. ä¿®æ”¹ `schema.prisma`
2. è¿è¡Œï¼š
   ```bash
   npm run prisma:dev
   ```

---

### å››ã€æ—¥å¿—è§„èŒƒ

- ä½¿ç”¨ `jet-logger` è®°å½•ä¸šåŠ¡æ—¥å¿—
- ä½¿ç”¨ `morgan` è®°å½• HTTP è¯·æ±‚æ—¥å¿—
- æ—¥å¿—åˆ†çº§ï¼š`info`, `warn`, `error`ï¼Œç¦æ­¢åœ¨ç”Ÿäº§çŽ¯å¢ƒä½¿ç”¨ `console.log`

---



### å…­ã€æµ‹è¯•è§„èŒƒ

#### âœ… æµ‹è¯•å·¥å…·
- ä½¿ç”¨ `vitest` ç¼–å†™å•å…ƒæµ‹è¯•
- æµ‹è¯•æ–‡ä»¶å‘½åï¼š`*.test.ts` æˆ– `*.spec.ts`
- æµ‹è¯•èŒƒå›´ï¼š
  - service å±‚é€»è¾‘
  - å…³é”®æ ¡éªŒé€»è¾‘
- æ ¸å¿ƒç›®çš„:å†™æµ‹è¯•æ–‡ä»¶æ˜¯ä¸ºäº†æ£€æŸ¥å‡ºåŽŸæœ¬ä»£ç é‡Œçš„é—®é¢˜ï¼Œä¿®æ”¹æµ‹è¯•æ–‡ä»¶åªå…è®¸ä¿®æ”¹ä¸‰æ¬¡ï¼Œæ¯æ¬¡ä¿®æ”¹åŠ ä¸Šä½ çš„ä¿®æ”¹åŽŸå› æ¬¡æ•°ï¼Œä»¥åŠæ˜¯å¦è¦ä¿®æ”¹è¢«æµ‹è¯•ä»£ç ï¼Œè¶…è¿‡ä¸‰æ¬¡ä¿®æ”¹æš‚æ—¶è·³è¿‡è¿™ä¸ªæ–‡ä»¶çš„æµ‹è¯•ï¼Œå¹¶è®°å½•è¯·æ±‚äººå·¥ç»è¡Œç¼–å†™æµ‹è¯•
#### âœ… ç¤ºä¾‹
```ts
// userService.test.ts
import { describe, it, expect } from 'vitest';
import { UserService } from '../services/UserService';

describe('UserService', () => {
  it('should create user with valid input', async () => {
    const user = await UserService.createUser({ email: 'test@example.com' });
    expect(user.email).toBe('test@example.com');
  });
});
```

---



